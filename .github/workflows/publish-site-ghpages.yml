name: Publish documentation

on:
  workflow_dispatch

jobs:
    build:
      runs-on: ubuntu-latest
      steps:
        - uses: actions/checkout@v4
        - name: Set up JDK 17
          uses: actions/setup-java@v4
          with:
            java-version: '17'
            distribution: 'temurin'
        - name: Publish to GitHub Pages
          shell: bash
          run: |
            echo "Publishing as ${GITHUB_ACTOR}"
            git config --global user.name "${GITHUB_ACTOR}"
            git config --global user.email "${GITHUB_ACTOR}@users.noreply.github.com"
            ./mvnw --batch-mode --no-transfer-progress install --file pom.xml
            cd changesets-maven-plugin
            ../mvnw --batch-mode --no-transfer-progress clean site scm-publish:publish-scm
